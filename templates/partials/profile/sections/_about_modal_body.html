{# Extracted modal About Me body #}
<div class="pointer-events-none absolute inset-0 opacity-45 mix-blend-normal bg-[radial-gradient(circle_at_22%_18%,#E5F4F2,transparent_55%),radial-gradient(circle_at_82%_74%,#FFDDD0,transparent_62%)]"></div>
<div class="flex items-start gap-4 flex-wrap"
    x-data="{ hasVideo: ($store.profileModal.therapist.video_gallery && $store.profileModal.therapist.video_gallery.length) }"
    x-init="$watch('$store.profileModal.therapist.video_gallery', v => hasVideo = (v && v.length))">
  <div class="flex items-center gap-3 mb-4" :class="!hasVideo ? 'mb-2' : 'mb-4'">
    <div class="w-8 h-8 rounded-xl bg-[#116466]/10 flex items-center justify-center ring-1 ring-[#BEE3DB] shadow-inner">
      <svg class="w-4.5 h-4.5 text-[#116466]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5Z"/><path d="M3.5 22c1.4-3.9 5-6.5 8.5-6.5s7.1 2.6 8.5 6.5"/></svg>
    </div>
    <div class="flex flex-col">
      <h2 class="text-[20px] md:text-[22px] font-semibold tracking-tight text-[#2e4a49] leading-snug">About Me</h2>
      <span class="hidden md:inline text-[11px] font-medium text-[#89B0AE]">Share connection, values & style</span>
    </div>
  </div>
</div>
<!-- Intro Video (modal first) - only render if a video exists -->
<template x-if="$store.profileModal.therapist.video_gallery && $store.profileModal.therapist.video_gallery.length">
  <div class="mb-10" x-data="videoManager()" x-init="if(!video){ const vg=Alpine.store('profileModal')?.therapist?.video_gallery||[]; if(vg.length) video=vg[0]; }" {% if editable %}data-editable="1"{% endif %}>
    <div class="flex items-center gap-3 mb-2">
      <h3 class="text-xl font-semibold text-[#555B6E]">Intro Video</h3>
      <span class="text-[11px] font-medium text-[#89B0AE]" x-text="video ? '1 / 1' : '0 / 1'"></span>
    </div>
    <div class="w-full md:w-72 flex flex-col gap-4">
      <div class="rounded-xl overflow-hidden bg-black aspect-video relative">
  <video :src="video.video_url" controls playsinline class="w-full h-full object-cover"
         @error="console.warn('Intro video failed to load, removing.'); const s=Alpine.store('profileModal'); if(s?.therapist){ s.therapist.video_gallery=[]; }"></video>
      </div>
      <template x-if="video.caption"><p class="text-[11px] text-[#555B6E]" x-text="video.caption"></p></template>
    </div>
  </div>
</template>
<!-- Personal Statement 1 (moves to top when no video because video block not rendered) -->
<div x-show="editable || $store.profileModal.therapist.personal_statement_q1" x-cloak>
  <div class="mb-8 rounded-xl p-4 md:p-5 bg-statement/90 ring-1 ring-[#BEE3DB] shadow-md" style="box-shadow:0 4px 18px -6px #555B6E1F;">
    <div class="group relative cursor-pointer" data-edit-wrapper data-field="personal_statement_q1" x-data="{can_edit: {{ editable|default:0|yesno:'true,false' }} }" role="button" tabindex="0" @click.stop="can_edit && $dispatch('edit-rich-text',{field:'personal_statement_q1',current:$store.profileModal.therapist.personal_statement_q1||'', el: $el})">
      <template x-if="$store.profileModal.therapist.personal_statement_q1">
        <div class="text-base md:text-lg leading-relaxed font-light text-[#2e4a49] prose prose-sm max-w-none" x-html="$store.profileModal.therapist.personal_statement_q1"></div>
      </template>
      <template x-if="!$store.profileModal.therapist.personal_statement_q1">
        <p class="italic text-[#89B0AE]" :class="can_edit ? 'animate-pulse' : ''" x-text="can_edit ? 'Add a first personal statement…' : ''"></p>
      </template>
      {% if editable %}<button type="button" class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition text-[10px] px-2 py-1 rounded bg-[#116466] text-white" @click.stop="$dispatch('edit-rich-text',{field:'personal_statement_q1',current:$store.profileModal.therapist.personal_statement_q1||'', el: $el})">Edit</button>{% endif %}
    </div>
  </div>
</div>
<!-- Image Gallery (modal third) - modern compact grid -->
<div x-show="editable || ($store.profileModal.therapist.gallery_images && $store.profileModal.therapist.gallery_images.length)" x-cloak>
  <template x-if="$store.profileModal.therapist.gallery_images && $store.profileModal.therapist.gallery_images.length">
    <div class="mb-10" x-data="{ hover:false }">
      <div class="flex items-center justify-between mb-3">
        <h3 class="text-sm font-bold tracking-wide text-[#555B6E]">My Images</h3>
        <span class="text-[10px] font-medium text-[#89B0AE]" x-text="$store.profileModal.therapist.gallery_images.length + ' image' + ($store.profileModal.therapist.gallery_images.length===1?'':'s')"></span>
      </div>
  <div class="grid grid-cols-3 md:grid-cols-6 gap-2 md:gap-3" data-gallery>
        <template x-for="(g,i) in $store.profileModal.therapist.gallery_images" :key="g.url || i">
      <figure class="group relative overflow-hidden rounded-xl ring-1 ring-[#BEE3DB] bg-white/60 backdrop-blur-sm shadow-sm hover:shadow-lg transition-all cursor-zoom-in"
      :class="g.is_primary ? 'col-span-3 md:col-span-3 row-span-2' : 'col-span-1'"
      :style="g.is_primary ? '' : ''"
      data-lightbox-image
      @click="($store.mediaLightbox ? $store.mediaLightbox.openImage(g.url) : ($store.profileModal.lightboxImage=g.url))"
      tabindex="0"
      @keydown.enter.prevent="($store.mediaLightbox ? $store.mediaLightbox.openImage(g.url) : ($store.profileModal.lightboxImage=g.url))">
    <div class="w-full overflow-hidden flex items-center justify-center bg-[#F6FBFA]" :class="g.is_primary ? 'aspect-[4/3] md:aspect-[16/10]' : 'aspect-[4/3]'">
      <img :src="g.url" :alt="g.caption || 'Gallery image'" loading="lazy"
       class="w-full h-full object-cover will-change-transform transition duration-500 ease-out group-hover:scale-105 group-focus:scale-105"
       :class="g.is_primary ? 'object-cover' : 'object-cover'" />
            </div>
            <!-- Gradient + caption -->
            <div class="pointer-events-none absolute inset-0 flex flex-col justify-end">
              <div class="opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity duration-300 bg-gradient-to-t from-black/55 via-black/20 to-transparent p-2 md:p-2.5">
                <div class="flex items-center gap-2">
                  <span x-show="g.is_primary" class="px-1.5 py-0.5 rounded-md bg-[#116466] text-white text-[9px] font-semibold tracking-wide shadow">PRIMARY</span>
                  <p x-show="g.caption" x-text="g.caption" class="text-[11px] leading-tight text-white font-medium line-clamp-2"></p>
                </div>
              </div>
            </div>
            <!-- Focus ring overlay -->
            <div class="absolute inset-0 rounded-xl ring-2 ring-offset-2 ring-[#116466] opacity-0 group-focus:opacity-100 transition"></div>
          </figure>
        </template>
      </div>
    </div>
  </template>
  <template x-if="editable && (!($store.profileModal.therapist.gallery_images && $store.profileModal.therapist.gallery_images.length))">
    <p class="italic text-[12px] text-[#89B0AE] mb-8">No gallery images yet.</p>
  </template>
</div>
<!-- Personal Statement 2 (modal fourth) -->
<div x-show="editable || $store.profileModal.therapist.personal_statement_q2" x-cloak>
  <div class="mb-8 rounded-xl p-4 md:p-5 bg-statement/90 ring-1 ring-[#BEE3DB] shadow-md" style="box-shadow:0 4px 18px -6px #555B6E1F;">
    <div class="group relative cursor-pointer" data-edit-wrapper data-field="personal_statement_q2" x-data="{can_edit: {{ editable|default:0|yesno:'true,false' }} }" role="button" tabindex="0" @click.stop="can_edit && $dispatch('edit-rich-text',{field:'personal_statement_q2',current:$store.profileModal.therapist.personal_statement_q2||'', el: $el})">
      <template x-if="$store.profileModal.therapist.personal_statement_q2">
        <div class="text-base md:text-lg leading-relaxed font-light text-[#2e4a49] prose prose-sm max-w-none" x-html="$store.profileModal.therapist.personal_statement_q2"></div>
      </template>
      <template x-if="!$store.profileModal.therapist.personal_statement_q2">
        <p class="italic text-[#89B0AE]" :class="can_edit ? 'animate-pulse' : ''" x-text="can_edit ? 'Add a second personal statement…' : ''"></p>
      </template>
      {% if editable %}<button type="button" class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition text-[10px] px-2 py-1 rounded bg-[#116466] text-white" @click.stop="$dispatch('edit-rich-text',{field:'personal_statement_q2',current:$store.profileModal.therapist.personal_statement_q2||'', el: $el})">Edit</button>{% endif %}
    </div>
  </div>
</div>
<!-- Personal Statement 3 (modal fifth) -->
<div x-show="editable || $store.profileModal.therapist.personal_statement_q3" x-cloak>
  <div class="mb-4 rounded-xl p-4 md:p-5 bg-statement/90 ring-1 ring-[#BEE3DB] shadow-md" style="box-shadow:0 4px 18px -6px #555B6E1F;">
    <div class="group relative cursor-pointer" data-edit-wrapper data-field="personal_statement_q3" x-data="{can_edit: {{ editable|default:0|yesno:'true,false' }} }" role="button" tabindex="0" @click.stop="can_edit && $dispatch('edit-rich-text',{field:'personal_statement_q3',current:$store.profileModal.therapist.personal_statement_q3||'', el: $el})">
      <template x-if="$store.profileModal.therapist.personal_statement_q3">
        <div class="text-base md:text-lg leading-relaxed font-light text-[#2e4a49] prose prose-sm max-w-none" x-html="$store.profileModal.therapist.personal_statement_q3"></div>
      </template>
      <template x-if="!$store.profileModal.therapist.personal_statement_q3">
        <p class="italic text-[#89B0AE]" :class="can_edit ? 'animate-pulse' : ''" x-text="can_edit ? 'Add a third personal statement…' : ''"></p>
      </template>
      {% if editable %}<button type="button" class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition text-[10px] px-2 py-1 rounded bg-[#116466] text-white" @click.stop="$dispatch('edit-rich-text',{field:'personal_statement_q3',current:$store.profileModal.therapist.personal_statement_q3||'', el: $el})">Edit</button>{% endif %}
    </div>
  </div>
</div>
