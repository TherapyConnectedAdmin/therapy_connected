{# Therapist Search Modal Partial #}
<div>
  <div x-show="$store.searchModal.show" x-cloak class="fixed inset-0 z-[9999] flex items-center justify-center backdrop-blur-sm" style="background: rgba(176,174,174,0.5); height: 100%; z-index: 9999;">
    <div class="rounded-xl shadow-lg w-[98vw] max-w-7xl relative overflow-y-auto h-full flex flex-col p-0 z-[2147483647]" @click.away="$store.searchModal.show = false" style="background-color: #BEE3DB; height: 100%; margin-top: 20px;">
    <div class="sticky top-0 z-10 flex flex-col items-center justify-center px-8 py-6 border-b border-[#BEE3DB] shadow-[0_4px_12px_-4px_rgba(85,91,110,0.10)]" style="background-color: #FAF9F9;">
      <div class="relative w-full flex flex-col items-center justify-center gap-2">
        <div class="w-full mb-2 pt-4 flex flex-col gap-4">
          <div class="flex w-full flex-row items-center justify-between">
            <span class="text-xl sm:text-2xl font-bold text-[#555B6E] text-left whitespace-nowrap">Therapy Connected</span>
            <button @click="$store.searchModal.show = false" class="bg-[#FF9950] text-white hover:bg-[#555B6E] rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center shadow-lg transition-all duration-150" style="font-size:2rem; min-width:40px; min-height:40px; max-width:60px; max-height:60px;" >
              <span class="sr-only">Close</span>
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-8 h-8">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
          <div class="flex w-full justify-center items-center">
            <div class="flex w-full sm:w-3/4 flex-nowrap items-center justify-center mx-auto">
              <input id="homepage-search-input" type="text" x-model="$store.searchModal.query" placeholder="Search therapists, practices, or specialties..." class="homepage-search-input border rounded-l-full px-4 sm:px-6 py-3 w-full focus:ring-2 text-sm sm:text-base" style="border-color: #89B0AE; color: #555B6E; background-color: #FAF9F9;" @keydown.enter.prevent="$store.searchModal.fetchResults()" />
              <button id="homepage-search-btn" type="button" @click="$store.searchModal.fetchResults()" class="homepage-search-btn font-semibold rounded-r-full px-4 sm:px-6 py-3 text-sm sm:text-base transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-[#89B0AE] cursor-pointer" style="background-color: #89B0AE; color: #FAF9F9; border-left: 0 !important; border-left-color: transparent !important;" onmouseover="this.style.backgroundColor='#555B6E'; this.style.color='#fff';" onmouseout="this.style.backgroundColor='#89B0AE'; this.style.color='#FAF9F9';">Search</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="px-8 py-8">
      <template x-if="$store.searchModal.results.length === 0">
        <div class="text-center text-gray-500">No therapists found.</div>
      </template>
      <div>
        <template x-for="therapist in $store.searchModal.pagedResults" :key="therapist.id">
          <div class="mb-6" x-data="{ therapist }">
            {% include "partials/therapist_card_search.html" %}
          </div>
        </template>
      </div>
      <div class="flex justify-center items-center gap-4 mt-8" x-show="$store.searchModal.totalPages > 1">
        <button @click="prevPage" :disabled="$store.searchModal.page === 1"
          class="get-started-btn rounded-full px-6 py-2 text-base font-semibold transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-[#89B0AE] disabled:opacity-50 disabled:cursor-not-allowed"
          :class="{'bg-[#BEE3DB] text-[#555B6E]': $store.searchModal.page === 1, 'bg-[#89B0AE] text-[#FAF9F9] hover:bg-[#555B6E] hover:text-white': $store.searchModal.page !== 1}"
        >
          Prev
        </button>
        <span class="text-[#555B6E] font-medium text-base bg-[#FAF9F9] rounded-full px-5 py-2 border border-[#BEE3DB] shadow-sm">Page <span x-text="$store.searchModal.page"></span> of <span x-text="$store.searchModal.totalPages"></span></span>
        <button @click="nextPage" :disabled="$store.searchModal.page === $store.searchModal.totalPages"
          class="get-started-btn rounded-full px-6 py-2 text-base font-semibold transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-[#89B0AE] disabled:opacity-50 disabled:cursor-not-allowed"
          :class="{'bg-[#BEE3DB] text-[#555B6E]': $store.searchModal.page === $store.searchModal.totalPages, 'bg-[#89B0AE] text-[#FAF9F9] hover:bg-[#555B6E] hover:text-white': $store.searchModal.page !== $store.searchModal.totalPages}"
        >
          Next
        </button>
      </div>
    </div>
  </div>
</div>
