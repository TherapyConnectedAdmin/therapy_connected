{% extends 'base.html' %}
{% load static %}
{% block title %}{{ profile_obj.first_name }} {{ profile_obj.last_name }} | Therapist Profile{% endblock %}
{% block meta %}
<meta name="description" content="Therapist profile for {{ profile_obj.first_name }} {{ profile_obj.last_name }} offering {{ profile_obj.therapy_delivery_method|default:'therapy services' }} in {% with loc=profile_obj.locations.first %}{% if loc %}{{ loc.city }}, {{ loc.state }}{% endif %}{% endwith %}.">
<link rel="canonical" href="{{ request.build_absolute_uri }}" />
{% endblock %}
{% block content %}
<div class="relative py-6 bg-[#ECEBE8]">
  <div class="pointer-events-none absolute inset-0 bg-gradient-to-b from-[#E3E2DF] via-[#F5F4F3] to-[#E0DFDC]"></div>
  <div class="relative">
  <div class="max-w-7xl mx-auto px-4">
    <script>
      window.addEventListener('alpine:init', () => {
        if(!window.Alpine.store('profileModal')) {
          Alpine.store('profileModal', {
            show:true, contentVisible:true, loading:false, therapist:{}, ids:[], currentIndex:0, next(){}, prev(){}, close(){}
          });
        }
        const data = {{ serialized|safe }};
        const store = Alpine.store('profileModal');
  store.therapist = data;
  store.lightboxImage = null;
      });
    </script>
    <!-- Fallback static badges if JS disabled -->
    <noscript>
      <div class="max-w-3xl mx-auto my-6 p-4 bg-[#FFE8E5] text-[#555B6E] text-sm rounded-lg">
        JavaScript is disabled; interactive sections (gallery lightbox, dynamic tabs) are not available.
      </div>
    </noscript>
  {% include 'partials/profile_modal.html' with standalone=1 %}
  </div>
  </div>
</div>
{% endblock %}
